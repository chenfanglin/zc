$(function(){initPages();bindEvent()});function initPages(){var B=$(window).height()-120;var A=false;if($(window).width()<=768){A=true}$("#customerData").bootstrapTable({cardView:A,undefinedText:"",cache:false,height:B,striped:true,pagination:true,pageSize:50,pageList:[10,25,50,100,200],sidePagination:"server",onPageChange:function(D,C){var E=$("#customerData").bootstrapTable("getOptions");var F=E.sortName;var G=E.sortOrder;if($("#focusbtn > span").hasClass("btn-important-highlight")){getData(D,C,1,F,G)}else{getData(D,C,0,F,G)}},onSort:function(E,F){var D=$("#customerData").bootstrapTable("getOptions");var G=D.pageNumber;var C=D.pageSize;if($("#focusbtn > span").hasClass("btn-important-highlight")){getData(G,C,1,E,F)}else{getData(G,C,0,E,F)}},rowStyle:function(C,D){if(D%2==0){return{classes:"odd_row"}}else{return{classes:"even_row"}}}});getData(1,50)}function getData(F,D,G,A,E,H){var H=$("#serachCustomer").val();var B=getUrlParam("customerID");var C={"customerID":B,"pageNumber":F,"pageSize":D,"flag":G,"sortName":A,"order":E,"keyValue":H};$("#customerData").bootstrapTable("showLoading");$.ajax({url:"getCustomerData.do",data:{"queryParam":JSON.stringify(C)},method:"post",async:true,success:function(J){if(J.statusCode==504){$.messager.popup("系统错误，错误代码504。")}else{var I={total:J.content.totalRecord,rows:J.content.customer};$("#customerData").bootstrapTable("hideLoading");$("#customerData").bootstrapTable("load",I);addActiveClass();$("table#customerData tbody tr").mouseover(function(){$(this).addClass("in_right")});$("table#customerData tbody tr").mouseout(function(){$(this).removeClass("in_right")})}}})}function bindEvent(){window.customerEvents={"click .edit":function(A,D,C,B){openEditCustomer(C)},"click .remove":function(A,D,C,B){delCustomerInfo(C)}};window.customerNameEvents={"click .customerName":function(A,D,C,B){openCompany(C.regemail)}};window.detailEvents={"click .detail":function(A,D,C,B){openDeatil(C)}};window.businessEvents={"click .businessName":function(A,D,C,B){openBusiness(C)}};window.businessInfoEvents={"click .edit":function(A,D,C,B){$("#createBusinessLabel").text("修改跟进信息");$("#updateBusiness").show();$("#insertBusiness").hide();createBusiness(C,1)},"click .remove":function(A,D,C,B){delBusinessInfo(C)}};window.operationEvents={"click .operationName":function(A,D,C,B){openOperation(C)}};window.operationInfoEvents={"click .edit":function(A,D,C,B){$("#createOperationLabel").text("修改跟进信息");$("#updateProblem").show();$("#insertProblem").hide();createProbem(C,1)},"click .remove":function(A,D,C,B){delProblemInfo(C)}};window.contactsEvents={"click .edit":function(A,D,C,B){$("#createContactLabel").text("修改联系人信息");$("#updateContacts").show();$("#insertContacts").hide();createContact(C,1)},"click .remove":function(A,D,C,B){delcontact(C)}};window.channelEvents={"switchChange.bootstrapSwitch .channelSwitch":function(A,D,C,B){if(A.target.checked==true){realchannel(C.appID,1,"开通成功")}else{realchannel(C.appID,0,"关闭成功")}}};$("#allbtn").click(function(){$("#allbtn > span").removeClass("btn-grayed").addClass("btn-all-highlight");$("#focusbtn > span").removeClass("btn-important-highlight").addClass("btn-grayed");getData(1,50,0)});$("#focusbtn").click(function(){$("#focusbtn > span").removeClass("btn-grayed").addClass("btn-important-highlight");$("#allbtn > span").removeClass("btn-all-highlight").addClass("btn-grayed");getData(1,50,1)});$("#serachCustomer").off("keyup drop").on("keyup drop",function(B){if(B.keyCode=="13"){var A=$("#serachCustomer").val();keySearch(A)}});$("#saveCustomerInfo").click(function(){updateCustomerInfo()});$("#countrySelect").change(function(){var A=$(this).children("option:selected").val();initSelectbox($("#areaSelect"),A,4);initSelectbox($("#citySelect"),$("#areaSelect").val(),5)});$("#areaSelect").change(function(){var A=$(this).children("option:selected").val();initSelectbox($("#citySelect"),A,5)});$("#updateUser").click(function(){updateCompany()});$("#pluginswitch").on("switchChange.bootstrapSwitch",function(A,B){if(B==true){usePlugin(0,"关闭成功")}else{usePlugin(1,"开通成功")}});$("#insertBusiness").click(function(){insertBusiness()});$("#updateBusiness").click(function(){updateBusiness()});$("#problemTypeSelect").change(function(){var A=$(this).children("option:selected").val();initSelectbox($("#typeNameSelect"),A,2)});$("#insertProblem").click(function(){insertProblem()});$("#updateProblem").click(function(){updateProblem()});$("#insertContacts").click(function(){insertContacts()});$("#updateContacts").click(function(){updateContacts()});$("#serachContact").off("keyup drop").on("keyup drop",function(B){if(B.keyCode=="13"){var A=$("#currentUsers").bootstrapTable("getOptions");var C=A.sortName;var D=A.sortOrder;getContactData(1,50,C,D)}});$("#checkUser").click(function(){selectContacts()})}function openEditCustomer(A){$.ajax({url:"getCustomerSelect.do",method:"post",async:true,success:function(G){var D=G.content.industrial;var C=G.content.customerRank;var F=G.content.operations;var E=G.content.businesser;var B=setOption(D,1);$("#industrialSelect").html(B.join(""));$("#industrialSelect").val(A.industrial);B=setOption(C,1);$("#customerRankSelect").html(B.join(""));$("#customerRankSelect").val(A.customerRank);B=setOption(E,1);$("#businessSelect").html(B.join(""));$("#businessSelect").val(A.business);B=setOption(F,1);$("#operationSelect").html(B.join(""));$("#operationSelect").val(A.operation);$("#inputcustomerID").val(A.customerID);$("#inputcustomerName").val(A.customerName);initSelectByURL($("#countrySelect"),"getCountryEnum.do");initSelectbox($("#areaSelect"),A.country,4);initSelectbox($("#citySelect"),A.area,5);$("#countrySelect").val(A.country);$("#areaSelect").val(A.area);$("#citySelect").val(A.cuscity);$("#editCustomer").modal({backdrop:"static",keyboard:false})}})}function openBusiness(A){$("#businessData").bootstrapTable("destroy");var B=false;if($(window).width()<=768){B=true}$("#businessData").bootstrapTable({url:"getBusinessByCustomer.do",cardView:B,undefinedText:"",cache:false,striped:true,pagination:true,search:true,showColumns:true,showToggle:true,showRefresh:true,queryParams:{"customerID":A.customerID},responseHandler:function(C){if($("#viewBusiness .fixed-table-toolbar").find("div").hasClass("columns pull-left")==false){$("#viewBusiness .fixed-table-toolbar").append('<div class="columns pull-left"><button id="createBusiness" class="btn btn-success" type="button"><i class="glyphicon glyphicon-plus"></i>创建</button></div>')}$("#createBusiness").unbind("click");$("#createBusiness").click(function(){$("#updateBusiness").hide();$("#insertBusiness").show();createBusiness(A)});return C.content}});$("#viewBusiness").modal({backdrop:"static",keyboard:false})}function openOperation(A){$("#operationData").bootstrapTable("destroy");var B=false;if($(window).width()<=768){B=true}var C=$(window).height()-200;$("#operationData").bootstrapTable({url:"getOperationByCustomer.do",cardView:B,undefinedText:"",height:C,cache:false,striped:true,pagination:true,search:true,showColumns:true,showToggle:true,showRefresh:true,queryParams:{"customerID":A.customerID},responseHandler:function(D){if($("#viewOperation .fixed-table-toolbar").find("div").hasClass("columns pull-left")==false){$("#viewOperation .fixed-table-toolbar").append('<div class="columns pull-left"><button id="createProblem" class="btn btn-success" type="button"><i class="glyphicon glyphicon-plus"></i>创建</button></div>')}$("#createProblem").unbind("click");$("#createProblem").click(function(){$("#updateProblem").hide();$("#insertProblem").show();createProbem(A)});return D.content},rowStyle:function(D,E){if(D.problemStatus=="00000001"){return{classes:"waring_info"}}else{if(D.problemStatus=="00000004"){return{classes:"info_info"}}else{return{}}}}});$("#viewOperation").modal({backdrop:"static",keyboard:false})}function createBusiness(A,B){$.ajax({url:"getCreateBusinessSelect.do",method:"post",async:true,success:function(G){$("#inputbusiness").val(A.business);$("#inputcustomerID").val(A.customerID);var E=G.content.city;var F=G.content.clueStatus;var C=G.content.dataStatus;var D=setOption(E,1);$("#businessCitySelect").html(D.join(""));D=setOption(F,1);$("#clueStatusSelect").html(D.join(""));D=setOption(C,1);$("#dataStatusSelect").html(D.join(""));$("#communicateStatus").val("");if(B==1){$("#inputbusinessID").val(A.businessID);$("#businessCitySelect").val(A.city);$("#clueStatusSelect").val(A.clue);$("#dataStatusSelect").val(A.dataStatus);$("#communicateStatus").val(A.communicateStatus.replace(new RegExp("<br>","gm"),"\n"))}}});$("#createBusinessModal").modal({backdrop:"static",keyboard:false})}function createProbem(A,B){$.ajax({url:"getCreateProblemSelect.do",method:"post",async:true,success:function(E){$("#inputcustomerID").val(A.customerID);$("#inputoperationID").val(A.operation);$("#inputoperationName").val(A.operationName);$("#solovetime").datetimepicker({format:"yyyy-mm-dd",todayBtn:true,autoclose:true,todayHighlight:1,startView:2,minView:2});var H=E.content.technology;var D=E.content.problemType;var C=E.content.problemStatus;var G=E.content.platformType;var J=E.content.communicate;var F=E.content.statusName;var I=setOption(H,1);$("#technicalersSelect").html(I.join(""));I=setOption(D,1);$("#problemTypeSelect").html(I.join(""));I=setOption(C,1);$("#problemStatusSelect").html(I.join(""));I=setOption(G,1);$("#platformSelect").html(I.join(""));I=setOption(J,1);$("#communicateSelect").html(I.join(""));I=setOption(F,1);$("#statusSelect").html(I.join(""));$("#typeNameSelect").val("");$("#solovetime").val("");$("#detailProblem").val("");$("#soloveWay").val("");if(B==1){$("#inputproblemID").val(A.problemID);$("#communicateSelect").val(A.communicate);$("#statusSelect").val(A.status);$("#platformSelect").val(A.platform);$("#technicalersSelect").val(A.technicalers);$("#problemTypeSelect").val(A.problemType);$("#problemStatusSelect").val(A.problemStatus);$("#solovetime").val(A.solveTime);$("#detailProblem").val(A.detailProblem.replace(new RegExp("<br>","gm"),"\n"));$("#soloveWay").val(A.solution.replace(new RegExp("<br>","gm"),"\n"));initSelectbox($("#typeNameSelect"),A.problemType,2);$("#typeNameSelect").val(A.subdivisionType)}}});$("#createOperation").modal({backdrop:"static",keyboard:false})}function insertBusiness(){var A={"city":$("#businessCitySelect").val(),"cityValue":$("#businessCitySelect").find("option:selected").text(),"clue":$("#clueStatusSelect").val(),"clueValue":$("#clueStatusSelect").find("option:selected").text(),"dataStatus":$("#dataStatusSelect").val(),"dataStatusValue":$("#dataStatusSelect").find("option:selected").text(),"communicateStatus":$("#communicateStatus").val().replace(new RegExp("\n","gm"),"<br>"),"businesser":$("#inputbusiness").val(),"customerID":$("#inputcustomerID").val()};$.ajax({url:"insertBusiness.do",data:{"business":JSON.stringify(A)},method:"post",async:true,success:function(B){$.messager.popup("添加成功");$("#createBusinessModal").modal("hide");$("#businessData").bootstrapTable("refresh")}})}function updateBusiness(){var A={"city":$("#businessCitySelect").val(),"cityValue":$("#businessCitySelect").find("option:selected").text(),"clue":$("#clueStatusSelect").val(),"clueValue":$("#clueStatusSelect").find("option:selected").text(),"dataStatus":$("#dataStatusSelect").val(),"dataStatusValue":$("#dataStatusSelect").find("option:selected").text(),"communicateStatus":$("#communicateStatus").val().replace(new RegExp("\n","gm"),"<br>"),"businessID":$("#inputbusinessID").val(),};$.ajax({url:"saveBusinessData.do",data:{"business":JSON.stringify(A)},method:"post",async:true,success:function(B){$.messager.popup("添加成功");$("#createBusinessModal").modal("hide");$("#businessData").bootstrapTable("refresh")}})}function insertProblem(){var A={"communicate":$("#communicateSelect").val(),"communicateName":$("#communicateSelect").find("option:selected").text(),"status":$("#statusSelect").val(),"statusName":$("#statusSelect").find("option:selected").text(),"problemType":$("#problemTypeSelect").val(),"problemTypeName":$("#problemTypeSelect").find("option:selected").text(),"subdivisionType":$("#typeNameSelect").val(),"technicalers":$("#technicalersSelect").val(),"technicalersName":$("#technicalersSelect").find("option:selected").text(),"problemStatus":$("#problemStatusSelect").val(),"problemStatusName":$("#problemStatusSelect").find("option:selected").text(),"platform":$("#platformSelect").val(),"platformName":$("#platformSelect").find("option:selected").text(),"customerID":$("#inputcustomerID").val(),"operations":$("#inputoperationID").val(),"operationsName":$("#inputoperationName").val(),"solveTime":$("#solovetime").val(),"detailProblem":$("#detailProblem").val().replace(new RegExp("\n","gm"),"<br>"),"solution":$("#soloveWay").val().replace(new RegExp("\n","gm"),"<br>")};$.ajax({url:"insertProblem.do",data:{"problem":JSON.stringify(A)},method:"post",async:true,success:function(B){$.messager.popup("添加成功");$("#createOperation").modal("hide");$("#operationData").bootstrapTable("refresh")}})}function updateProblem(){var A={"problemID":$("#inputproblemID").val(),"communicate":$("#communicateSelect").val(),"communicateName":$("#communicateSelect").find("option:selected").text(),"status":$("#statusSelect").val(),"statusName":$("#statusSelect").find("option:selected").text(),"problemType":$("#problemTypeSelect").val(),"problemTypeName":$("#problemTypeSelect").find("option:selected").text(),"subdivisionType":$("#typeNameSelect").val(),"technicalers":$("#technicalersSelect").val(),"technicalersName":$("#technicalersSelect").find("option:selected").text(),"problemStatus":$("#problemStatusSelect").val(),"problemStatusName":$("#problemStatusSelect").find("option:selected").text(),"platform":$("#platformSelect").val(),"platformName":$("#platformSelect").find("option:selected").text(),"solveTime":$("#solovetime").val(),"detailProblem":$("#detailProblem").val().replace(new RegExp("\n","gm"),"<br>"),"solution":$("#soloveWay").val().replace(new RegExp("\n","gm"),"<br>")};$.ajax({url:"updateProblem.do",data:{"problem":JSON.stringify(A)},method:"post",async:true,success:function(B){$.messager.popup("修改成功");$("#createOperation").modal("hide");$("#operationData").bootstrapTable("refresh")}})}function openCompany(A){$.ajax({url:"getRegCompanyData.do",data:{"email":A},method:"post",async:true,success:function(C){var B=C.content[0];$("#inputcompanyName").val(B.companyName);$("#inputemail").val(B.regEmail);$("#inputname").val(B.regName);$("#inputphoneNumber").val(B.regPhoneNumber);$("#inputqq").val(B.regQQ);$("#inputregDate").val(B.regDate);$("#inputgameNumber").val(B.gameNumber);if(B.usePlugin==0){$("#pluginswitch").bootstrapSwitch("state",false,true)}else{$("#pluginswitch").bootstrapSwitch("state",true,true)}}});$("#editRegInfo").modal({backdrop:"static",keyboard:false})}function openDeatil(A){$("#contactData").bootstrapTable("destroy");var B=false;if($(window).width()<=768){B=true}var C=$(window).height()-200;$("#contactData").bootstrapTable({url:"getContactsData.do",cardView:B,undefinedText:"",height:C,cache:false,striped:true,pagination:true,search:true,showColumns:true,showToggle:true,showRefresh:true,queryParams:{"customerID":A.customerID},responseHandler:function(D){if($("#viewDetail .fixed-table-toolbar").find("div").hasClass("columns pull-left")==false){$("#viewDetail .fixed-table-toolbar").append('<div class="columns pull-left"><button id="createContact" class="btn btn-success" type="button"><i class="glyphicon glyphicon-plus"></i>创建</button></div>');$("#viewDetail .fixed-table-toolbar").append('<div class="columns pull-left"><button id="selectCurrentContact" style="margin-left: 8px" class="btn btn-success" type="button"><i class="glyphicon glyphicon-search"></i>选择联系人</button></div>')}$("#createContact").unbind("click");$("#createContact").click(function(){$("#createContactLabel").text("添加联系人信息");$("#updateContacts").hide();$("#insertContacts").show();createContact(A)});$("#selectCurrentContact").unbind("click");$("#selectCurrentContact").click(function(){selectCurrentContact(A)});return D.content}});$("#viewDetail").modal({backdrop:"static",keyboard:false})}function selectCurrentContact(A){$("#inputcustomerID").val(A.customerID);$("#currentUsers").bootstrapTable("destroy");var B=false;if($(window).width()<=768){B=true}var C=$(window).height()-280;$("#currentUsers").bootstrapTable({cardView:B,undefinedText:"",cache:false,height:C,striped:true,pagination:true,pageSize:50,pageList:[10,25,50,100,200],sidePagination:"server",onPageChange:function(E,D){var F=$("#currentUsers").bootstrapTable("getOptions");var G=F.sortName;var H=F.sortOrder;getContactData(E,D,G,H)},onSort:function(F,G){var E=$("#currentUsers").bootstrapTable("getOptions");var H=E.pageNumber;var D=E.pageSize;getContactData(H,D,F,G)}});getContactData(1,50);$("#currentContacts").modal({backdrop:"static",keyboard:false})}function getContactData(D,B,C,E){var F=$("#serachContact").val();var A={"pageNumber":D,"pageSize":B,"sortName":C,"order":E,"keyValue":F};$("#currentUsers").bootstrapTable("showLoading");$.ajax({url:"getCurrentContacts.do",data:{"queryParam":JSON.stringify(A)},method:"post",async:true,success:function(H){if(H.statusCode==504){$.messager.popup("系统错误，错误代码504。")}else{var G={total:H.content.totalRecord,rows:H.content.contacts};$("#currentUsers").bootstrapTable("hideLoading");$("#currentUsers").bootstrapTable("load",G)}}})}function updateCompany(){var A={"companyName":$("#inputcompanyName").val(),"regEmail":$("#inputemail").val(),"regName":$("#inputname").val(),"regPhoneNumber":$("#inputphoneNumber").val(),"regQQ":$("#inputqq").val(),"gameNumber":$("#inputgameNumber").val()};$.ajax({url:"saveRegInfo.do",data:{"companyData":JSON.stringify(A)},method:"post",async:true,success:function(B){$.messager.popup("修改成功");$("#editRegInfo").modal("hide")}})}function usePlugin(B,A){$.ajax({url:"userplugin.do",data:{"email":$("#inputemail").val(),"flag":B},method:"post",async:true,success:function(C){$.messager.popup(A)}})}function realchannel(C,B,A){$.ajax({url:"realTimeChannel.do",data:{"appID":C,"flag":B},method:"post",async:true,success:function(D){$.messager.popup(A);$("#gameData").bootstrapTable("refresh")}})}function keySearch(B){var A=$("#customerData").bootstrapTable("getOptions");var C=A.sortName;var D=A.sortOrder;if($("#focusbtn > span").hasClass("btn-important-highlight")){getData(1,50,1,C,D,B)}else{getData(1,50,0,C,D,B)}}function updateCustomerInfo(){var A={"customerName":$("#inputcustomerName").val(),"industrial":$("#industrialSelect").val(),"industrialName":$("#industrialSelect").find("option:selected").text(),"customerRank":$("#customerRankSelect").val(),"customerRankName":$("#customerRankSelect").find("option:selected").text(),"country":$("#countrySelect").val(),"countryName":$("#countrySelect").find("option:selected").text(),"area":$("#areaSelect").val(),"areaName":$("#areaSelect").find("option:selected").text(),"cuscity":$("#citySelect").val(),"cityName":$("#citySelect").find("option:selected").text(),"business":$("#businessSelect").val(),"businessName":$("#businessSelect").find("option:selected").text(),"operation":$("#operationSelect").val(),"operationName":$("#operationSelect").find("option:selected").text(),"customerID":$("#inputcustomerID").val()};$.ajax({url:"saveCustomerData.do",data:{"customer":JSON.stringify(A)},method:"post",async:true,success:function(B){if(B.statusCode==504){$.messager.popup("系统错误，错误代码504。")}else{if(B.statusCode==4){window.open("login.jsp")}else{$.messager.popup("修改成功");$("#editCustomer").modal("hide");refreshTable($("#customerData"))}}}})}function viewgame(A,D){$("#gameData").bootstrapTable("destroy");var B=false;if($(window).width()<=768){B=true}var C=$(window).height()-200;$("#gameData").bootstrapTable({url:"getGameInfos.do",cardView:B,undefinedText:"",height:C,striped:true,search:true,pagination:true,showColumns:true,showToggle:true,showRefresh:true,queryParams:{"email":A,"gameType":D},responseHandler:function(E){return E.content},onLoadSuccess:function(E){if(D=="h5"){$("#gameData").bootstrapTable("hideColumn","platformType");$("#gameData").bootstrapTable("hideColumn","flag")}else{$("#gameData").bootstrapTable("showColumn","platformType");$("#gameData").bootstrapTable("showColumn","flag")}$(".channelSwitch").bootstrapSwitch("size","small")}});$("#viewGameinfo").modal({backdrop:"static",keyboard:false})}function viewchannel(A){$("#channelData").bootstrapTable("destroy");var B=false;if($(window).width()<=768){B=true}var C=$(window).height()-200;$("#channelData").bootstrapTable({url:"getChannelData.do",cardView:B,undefinedText:"",height:C,cache:false,striped:true,pagination:true,search:true,showColumns:true,showToggle:true,showRefresh:true,queryParams:{"email":A},responseHandler:function(D){return D.content}});$("#viewChannelinfo").modal({backdrop:"static",keyboard:false})}function viewgameh5(A){$("#h5Data").bootstrapTable("destroy");var B=false;if($(window).width()<=768){B=true}var C=$(window).height()-200;$("#h5Data").bootstrapTable({url:"getGameInfosH5.do",cardView:B,undefinedText:"",height:C,cache:false,striped:true,pagination:true,search:true,showColumns:true,showToggle:true,showRefresh:true,queryParams:{"email":A},responseHandler:function(D){return D.content}});$("#viewH5info").modal({backdrop:"static",keyboard:false})}function delProblemInfo(A){$.messager.confirm("","确定删除该条跟进信息？",function(){$.ajax({url:"delOperation.do",data:{"problemID":A.problemID},method:"post",async:true,success:function(B){if(B.statusCode==504){$.messager.popup("系统错误，错误代码504。")}else{if(B.statusCode==4){window.open("login.jsp")}else{$.messager.popup("删除成功");$("#operationData").bootstrapTable("refresh")}}}})})}function delBusinessInfo(A){$.messager.confirm("","确定删除该条跟进信息？",function(){$.ajax({url:"delBusiness.do",data:{"businessID":A.businessID},method:"post",async:true,success:function(B){if(B.statusCode==504){$.messager.popup("系统错误，错误代码504。")}else{if(B.statusCode==4){window.open("login.jsp")}else{$.messager.popup("删除成功");$("#businessData").bootstrapTable("refresh")}}}})})}function delCustomerInfo(A){$.messager.confirm("","确定删除该条客户信息？",function(){$.ajax({url:"delCustomers.do",data:{"customerID":A.customerID},method:"post",async:true,success:function(B){if(B.statusCode==504){$.messager.popup("系统错误，错误代码504。")}else{if(B.statusCode==4){window.open("login.jsp")}else{$.messager.popup("删除成功");refreshTable($("#customerData"))}}}})})}function selectContacts(){var A=$("#currentUsers").bootstrapTable("getSelections");var B=$("#inputcustomerID").val();$.ajax({url:"confirmSelect.do",data:{"customerID":B,"updateContacts":JSON.stringify(A)},method:"post",async:true,success:function(C){if(C.statusCode==504){$.messager.popup("系统错误，错误代码504。")}else{$.messager.popup("选择成功");$("#currentContacts").modal("hide");$("#contactData").bootstrapTable("refresh")}}})};